<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Calculadora Handicap</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    .box { background: #fff; padding: 20px; border-radius: 8px; max-width: 400px; margin: auto; box-shadow: 0 0 10px rgba(0,0,0,0.2); }
    input { width: 100%; padding: 8px; margin: 5px 0; }
    button { padding: 10px; width: 100%; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
    .result { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <div class="box">
    <h3>Calculadora de Handicap</h3>
    <label>Linha atual:</label>
    <input type="number" id="linha" step="0.5" value="13">
    <label>Odd do favorito:</label>
    <input type="number" id="oddFav" step="0.001" value="1.543">
    <label>Odd do azarão:</label>
    <input type="number" id="oddDog" step="0.001" value="2.2">
    <label>Nova linha:</label>
    <input type="number" id="novaLinha" step="0.5" value="14.5">
    <button onclick="calcular()">Calcular Odds</button>
    <div class="result" id="resultado"></div>
  </div>

  <script>
    // função normal padrão
    function cdf(x) {
      var t = 1 / (1 + 0.2316419 * Math.abs(x));
      var d = 0.3989423 * Math.exp(-x * x / 2);
      var prob = d * t * (0.3193815 + t * (-0.3565638 + t * (1.781478 + t * (-1.821256 + t * 1.330274))));
      if (x > 0) return 1 - prob;
      else return prob;
    }

    function calcular() {
      let linha = parseFloat(document.getElementById("linha").value);
      let oddFav = parseFloat(document.getElementById("oddFav").value);
      let oddDog = parseFloat(document.getElementById("oddDog").value);
      let novaLinha = parseFloat(document.getElementById("novaLinha").value);

      // Probabilidades implícitas
      let pFav = 1 / oddFav;
      let pDog = 1 / oddDog;
      let soma = pFav + pDog;
      pFav /= soma;
      pDog /= soma;

      // converte linha em z-score assumindo normal
      let zAtual = 0; 
      let spread = linha;
      let desvio = 7; // parâmetro ajustável
      let probFav = cdf(spread / desvio);
      
      // Ajuste da nova linha
      let probNova = cdf(novaLinha / desvio);
      
      // Odds ajustadas
      let novaOddFav = 1 / probNova;
      let novaOddDog = 1 / (1 - probNova);

      document.getElementById("resultado").innerHTML =
        `+${novaLinha}: ${novaOddFav.toFixed(3)} <br> -${novaLinha}: ${novaOddDog.toFixed(3)}`;
    }
  </script>
</body>
</html>
